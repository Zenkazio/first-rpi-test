<!doctype html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <h1>Counter: <span id="counter">0</span></h1>

        <button onclick="send('Increment')">+</button>
        <button onclick="send('Decrement')">âˆ’</button>
        <button onclick="send('Reset')">Reset</button>

        <audio id="player" preload="auto"></audio>

        <script>
            const ws = new WebSocket("ws://" + location.host + "/ws");

            ws.onmessage = (event) => {
                const msg = JSON.parse(event.data);

                if (msg.type === "CounterUpdate") {
                    document.getElementById("counter").textContent = msg.value;
                }

                if (msg.type === "PlaySound") {
                    const player = document.getElementById("player");
                    player.src = "/sounds/" + msg.name;
                    player.play();
                }
            };

            function send(type) {
                ws.send(JSON.stringify({ type }));
            }
        </script>
    </body>
</html>
